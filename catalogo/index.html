<!DOCTYPE html>
<html>

<head>
	<title>Catálogo dos filmes</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<script src="./js.js"></script>
	<link rel="stylesheet" type="text/css" href="estilo.css">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@300&display=swap" rel="stylesheet">
    <script>$(function () {
        let link = "https://rafaelescalfoni.github.io/desenv_web/filmes.json";
        $.get(link, function (data) {
            console.log(data);
            $.each(data, function (index, filme) {
                let $divCatalogo = $("<div>").addClass("catalogo");
                let $figura = $("<img>").attr("src", filme.figura).addClass("figura");
                let $titulo = $("<h1>").text(filme.titulo).addClass("titulo");
                let $genero = $("<p>").text(filme.generos.join(", ")).addClass("generos");
                let estrela = filme.opinioes[0].rating;
                let $sinopse = $("<h4>").text(filme.resumo).addClass("sinopse");
                let $elenco = $("<p>").text("Elenco: " + filme.elenco.join(", ")).addClass("elenco");
                let $semelhantes = $("<p>").text("Títulos Semelhantes:").addClass("ts");
                switch (estrela) {
                    case 4: {
                        $estrela = $("<img>").attr("src", "4-estrelas.png").addClass("estrela");
                    } break;
                    case 5: {
                        $estrela = $("<img>").attr("src", "5-estrelas.png").addClass("estrela");
                    }
                }
                $divCatalogo.append($figura);
                $divCatalogo.append($titulo);
                let classificacao = filme.classificacao;
                if (classificacao == 18) {
                    $classificaoetaria = $("<img>").attr("src", "18.png").addClass("classificacao");
                    $divCatalogo.append($classificaoetaria);
                }
                else if (classificacao == 16) {
                    $classificaoetaria = $("<img>").attr("src", "16.png").addClass("classificacao");
                    $divCatalogo.append($classificaoetaria);
                }
                else if (classificacao == 14) {
                    $classificaoetaria = $("<img>").attr("src", "14.png").addClass("classificacao");
                    $divCatalogo.append($classificaoetaria);
                }
                else if (classificacao == 12) {
                    $classificaoetaria = $("<img>").attr("src", "12.png").addClass("classificacao");
                    $divCatalogo.append($classificaoetaria);
                }
                else {
                    $classificaoetaria = $("<img>").attr("src", "livre.png").addClass("classificacao");
                    $divCatalogo.append($classificaoetaria);
                }
                $divCatalogo.append($estrela);
                $divCatalogo.append($genero);
                $divCatalogo.append($sinopse);
                $divCatalogo.append($elenco);
                $divCatalogo.append($semelhantes);
                $.each(filme.titulosSemelhantes, function (idx, titulo) {
                    let $tituloSemelhante = $("<li>").text("| " + data[titulo - 1].titulo + " | ");
                    $tituloSemelhante.addClass("semelhantes");
                    $divCatalogo.append($tituloSemelhante);
                });
    
                $("body").append($divCatalogo);
            })
    
        });
    })</script>
</head>

<body>
	<div class="principal">
		<h1 class="titulo">Catálogo</h1>
	</div>
    <div id="voltar">
        <a href=">../webcliente.html">Voltar</a>
        </div>
</body>

</html>